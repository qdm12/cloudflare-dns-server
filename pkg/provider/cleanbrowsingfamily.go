package provider

import (
	"net"
	"net/url"
)

type cleanBrowsingFamily struct{}

func CleanBrowsingFamily() Provider {
	return &cleanBrowsingFamily{}
}

func (c *cleanBrowsingFamily) String() string {
	return "Cleanbrowsing Family"
}

func (c *cleanBrowsingFamily) DNS() DNSServer {
	return DNSServer{
		IPv4: []net.IP{{185, 228, 168, 168}, {185, 228, 169, 168}},
		IPv6: []net.IP{
			{0x2a, 0xd, 0x2a, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
			{0x2a, 0xd, 0x2a, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
		},
	}
}

func (c *cleanBrowsingFamily) DoT() DoTServer {
	return DoTServer{
		IPv4: []net.IP{{185, 228, 168, 168}, {185, 228, 169, 168}},
		IPv6: []net.IP{
			{0x2a, 0xd, 0x2a, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
			{0x2a, 0xd, 0x2a, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0},
		},
		Name: "family-filter-dns.cleanbrowsing.org",
		Port: defaultDoTPort,
	}
}

func (c *cleanBrowsingFamily) DoH() DoHServer {
	// See https://cleanbrowsing.org/guides/dnsoverhttps
	return DoHServer{
		URL: &url.URL{
			Scheme: "https",
			Host:   "doh.cleanbrowsing.org",
			Path:   "/doh/family-filter/",
		},
	}
}
