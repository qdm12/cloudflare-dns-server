package provider

import (
	"net"
	"net/url"
)

type google struct{}

func Google() Provider {
	return &google{}
}

func (g *google) String() string {
	return "Google"
}

func (g *google) DNS() DNSServer {
	return DNSServer{
		IPv4: []net.IP{{8, 8, 8, 8}, {8, 8, 4, 4}},
		IPv6: []net.IP{
			{0x20, 0x1, 0x48, 0x60, 0x48, 0x60, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x88, 0x88},
			{0x20, 0x1, 0x48, 0x60, 0x48, 0x60, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x88, 0x44},
		},
	}
}

func (g *google) DoT() DoTServer {
	return DoTServer{
		IPv4: []net.IP{{8, 8, 8, 8}, {8, 8, 4, 4}},
		IPv6: []net.IP{
			{0x20, 0x1, 0x48, 0x60, 0x48, 0x60, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x88, 0x88},
			{0x20, 0x1, 0x48, 0x60, 0x48, 0x60, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x88, 0x44},
		},
		Name: "dns.google",
		Port: defaultDoTPort,
	}
}

func (g *google) DoH() DoHServer {
	// See https://developers.google.com/speed/public-dns/docs/doh
	return DoHServer{
		URL: &url.URL{
			Scheme: "https",
			Host:   "dns.google",
			Path:   "/dns-query",
		},
	}
}
